del mihomo.yaml
@REM clash.yaml https://github.com/anaer/Sub/blob/main/mihomo.yaml
aria2c -d . --check-certificate=false --max-connection-per-server=5 --max-concurrent-downloads=10 --split=10 --min-split-size=1M --continue=true --optimize-concurrent-downloads=true --connect-timeout=3 --timeout=5 --lowest-speed-limit=10K --allow-overwrite=true  https://git.988896.xyz/https://raw.githubusercontent.com/anaer/Sub/main/mihomo.yaml https://cf.ghproxy.cc/https://raw.githubusercontent.com/anaer/Sub/main/mihomo.yaml https://jsd.cdn.zzko.cn/gh/anaer/Sub@main/mihomo.yaml https://jsd.onmicrosoft.cn/gh/anaer/Sub@main/mihomo.yaml https://fastraw.ixnic.net/anaer/Sub/main/mihomo.yaml https://ghproxy.net/https://raw.githubusercontent.com/anaer/Sub/main/mihomo.yaml https://github.moeyy.xyz/https://raw.githubusercontent.com/anaer/Sub/main/mihomo.yaml https://mirror.ghproxy.com/https://raw.githubusercontent.com/anaer/Sub/main/mihomo.yaml https://cdn.jsdelivr.us/gh/anaer/Sub@main/mihomo.yaml https://fastly.jsdelivr.net/gh/anaer/Sub@main/mihomo.yaml https://gcore.jsdelivr.net/gh/anaer/Sub@main/mihomo.yaml https://testingcf.jsdelivr.net/gh/anaer/Sub@main/mihomo.yaml https://cdn.jsdelivr.net/gh/anaer/Sub@main/mihomo.yaml https://raw.cachefly.998111.xyz/anaer/Sub/main/mihomo.yaml https://raw.githubusercontent.com/anaer/Sub/main/mihomo.yaml

@REM mihomo-windows-amd64.zip https://github.com/MetaCubeX/mihomo/releases
@REM aria2c -d . --check-certificate=false --max-connection-per-server=5 --max-concurrent-downloads=10 --split=10 --min-split-size=1M --continue=true --optimize-concurrent-downloads=true --connect-timeout=3 --timeout=5 --lowest-speed-limit=10K --allow-overwrite=true  https://git.988896.xyz/https://github.com/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://cf.ghproxy.cc/https://github.com/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://cors.isteed.cc/github.com/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://dl.ghpig.top/https://github.com/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://download.nuaa.cf/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://download.scholar.rr.nu/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://download.yzuu.cf/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://gh.con.sh/https://github.com/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://gh.ddlc.top/https://github.com/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://gh.jiasu.in/https://github.com/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://gh.mixyun.cyou/https://github.com/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://gh.mzec.top/https://github.com/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://gh.nxnow.top/https://github.com/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://ghproxy.053000.xyz/https://github.com/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://ghproxy.cc/https://github.com/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://ghproxy.liuzhicong.com/https://github.com/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://ghproxy.net/https://github.com/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://git.814560.xyz/https://github.com/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://git.domob.org/https://github.com/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://hub.gitmirror.com/https://github.com/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://mirror.ghproxy.com/https://github.com/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://sciproxy.com/github.com/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://slink.ltd/https://github.com/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://ghps.cc/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://521github.com/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip https://gh.900110.xyz/https://github.com/MetaCubeX/mihomo/releases/download/v1.18.5/mihomo-windows-amd64-v1.18.5.zip

netstat -aon | findstr "9090" > nul
if %errorlevel% equ 0 (
curl "http://127.0.0.1:9090/configs?force=true" ^
  -X "PUT" ^
  -H "Content-Type: application/json" ^
  --data-raw ^"^{^\^"path^\^": ^\^"^\^", ^\^"payload^\^": ^\^"^\^"^}^"

  echo "UPDATE CONFIG SUCCESS"

  if not exist "ui" (
  echo "ui directory not exist, trigger upgrade ui"
  curl "http://127.0.0.1:9090/upgrade/ui" ^
   -X "POST"
  )
)

timeout /t 3